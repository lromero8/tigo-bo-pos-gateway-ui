<!--
//
//  
//  
//
//  Created by Francisco Hernandez on 06-12-2018
//  Copyright © 2018 hightech-corp. All rights reserved.
//
-->

<div class="container-fluid container-fullw  box-shadow mb-5 pt-2">

    <form [formGroup]="paymentOptFrm">
    
    <div class="row pb-4">
  
      <div class="col-md-3">
        <div class="form-group">			
          <label for="invoiceId">N&uacute;mero de factura:</label>
          <input  type="text" name="invoiceId" id="invoiceId" class="form-control"  placeholder="# de transaccion ..." formControlName="invoiceId">
        </div>
      </div>
  
      <div class="col-md-3">
        <div class="form-group">			
          <label for="startDate">Fecha inicial:</label>
          <input  type="text" name="startDate" id="startDate" class="form-control" bsDatepicker  [bsConfig]="bsConfig" #dpa="bsDatepicker" readonly placeholder="Seleccione" formControlName="startDate">
        </div>
      </div>
   
      <div class="col-md-3">
        <div class="form-group">			
          <label for="endDate">Fecha Final:</label>
          <input  type="text" name="endDate" id="endDate" class="form-control" bsDatepicker [bsConfig]="bsConfig" #dpb="bsDatepicker" readonly placeholder="Seleccione" formControlName="endDate">
        </div>
      </div>
  
      <div class="col-md-1">
      <div class="form-group">
          &nbsp;
        <label for=""> &nbsp; &nbsp; </label>
        <button class="btn btn-primary  btn-sm btn-block" type="submit" ngbTooltip="Buscar" (click)="search()" type="submit">
            <i class="fa fa-search fa-lg"></i>
        </button>
      </div>   
      
      
          
      </div>

      <div class="col-md-1">
        <div class="form-group">
          <label for=""> &nbsp; &nbsp; </label>
          <button class="btn btn-primary btn-sm btn-block" type="button" (click)="print(printTpl)">
            <i class="fa fa-print"></i>
          </button>
        </div>
      </div>
  
        <div class="col-md-1">
            <div class="form-group">
                &nbsp;
              <label for=""> &nbsp; &nbsp; </label>
              <button class="btn btn-primary  btn-sm btn-block"  ngbTooltip="Limpiar" (click)="clean()" type="button">
                  <i class="fa fa-eraser fa-lg"></i> 
              </button>
            </div>
  
        </div>
  
        </div>
        
      </form>
    </div>
  
  
    <h1 class="display-5 text-center mb-4">Reporte de forma de pagos</h1>
    <h3 class="display-6 text-center mb-4">N&uacute;mero de Factura: {{ paymentOptData.invoiceId }} </h3>

    <ngx-datatable
        class='material'
        [columnMode]="'force'"        
        [headerHeight]="50"
        [footerHeight]="50"
        [rowHeight]="'auto'"
        [limit]="5"
        [rows]='paymentOptData.payments'
        [selected]="selected"
        [selectionType]="'checkbox'"
        [selectAllRowsOnPage]="false"
        [displayCheck]="displayCheck"
        (activate)="onActivate($event)"
        (select)='onSelect($event)'>

          <ngx-datatable-column
            [width]="50"
            [sortable]="false"
            [canAutoResize]="false"
            [draggable]="false"
            [resizeable]="false"
            [headerCheckboxable]="false"
            [checkboxable]="true"
            (change)="hola()">      
          </ngx-datatable-column> 
  	      <ngx-datatable-column name="Cajero" prop="cahsierId"></ngx-datatable-column>
  	      <ngx-datatable-column name="Caja" prop="registerId"></ngx-datatable-column>
          <ngx-datatable-column name="Fecha" prop="date"></ngx-datatable-column>
          <ngx-datatable-column name="Hora" prop="hour"></ngx-datatable-column>
          <ngx-datatable-column name="Voucher" prop="voucher"></ngx-datatable-column>
          <ngx-datatable-column name="Forma" prop="paymentOption"></ngx-datatable-column>
          <ngx-datatable-column name="Monto" prop="amount"></ngx-datatable-column>

          <ngx-datatable-column name="Acciones" prop="acciones" >
              <ng-template let-row="row" let-id="value" ngx-datatable-cell-template>
                <button class="btn btn-primary fa fa-pencil"></button>
              </ng-template>
          </ngx-datatable-column>

        
      </ngx-datatable> 


<ng-template #printTpl>
  <div class="modal-header modaleHeader">
    <h4 class="modal-title pull-left">Imprimir</h4>
    <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide(); animateBank=false; ">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <h6 class="text-center text-bold font-weight-bold">¿Esta seguro que desea realizar imprimir el item(s)
      seleccionado(s)?</h6>

    <div class="row justify-content-center align-items-center">


      <div class="ml-2 mr-2 ">
        <button class="btn btn-secondary" (click)="cancel()"> Cancelar</button>
      </div>
      <div class="ml-2 mr-2 ">
        <button class="btn btn-primary" (click)="printSelected()">Aceptar</button>
      </div>
    </div>
  </div>
</ng-template>