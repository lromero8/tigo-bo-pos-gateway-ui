<!--
//
//  
//  
//
//  Created by Francisco Hernandez on 06-12-2018
//  Copyright © 2018 hightech-corp. All rights reserved.
//
-->


<div class="container-fluid container-fullw  box-shadow mb-5 pt-2">

    <form [formGroup]="paymentReportsFrm" (validSubmit)="search()">
    
    <div class="row pb-4">
  
      <div class="col-md-3">
        <div class="form-group">			
          <label for="registerId">N&uacute;mero de caja:</label>
          <input  type="text" name="registerId" id="registerId" class="form-control"  placeholder=" ..." formControlName="registerId">
        </div>
      
        <div class="form-group">			
          <label for="cashierId">Cajero:</label>
          <input  type="text" name="cashierId" id="cashierId" class="form-control"  placeholder=" ..." formControlName="cashierId">
        </div>
      </div>
  
      <div class="col-md-3">
        <div class="form-group">			
          <label for="branchOffice">Sucursal:</label>
          <input  type="text" name="branchOffice" id="branchOffice" class="form-control"  placeholder=" ..." formControlName="branchOffice">
        </div>

        <div class="form-group">			
            <label for="local">Localidad:</label>
            <input  type="text" name="local" id="local" class="form-control"  placeholder=" ..." formControlName="local">
          </div>
      </div>

      <div class="col-md-3">
          <div class="form-group">			
              <label for="date">Fecha:</label>
              <input  type="text" name="date" id="date" class="form-control" bsDatepicker  [bsConfig]="bsConfig" #dpa="bsDatepicker" readonly placeholder="Seleccione" formControlName="date">
            </div>


            <div class="form-group">
              &nbsp;
              <label for=""> &nbsp; &nbsp; </label>
              <button class="btn btn-primary  btn-sm btn-block" ngbTooltip="Imprimir" (click)="print(printTpl)" type="button">
                <i class="fa fa-print fa-lg"></i>
              </button>
            </div>
      </div>
  
      <div class="col-md-3">
      <div class="form-group">
          &nbsp;
        <label for=""> &nbsp; &nbsp; </label>
        <button class="btn btn-primary  btn-sm btn-block"  ngbTooltip="Buscar" type="submit">
            <i class="fa fa-search fa-lg"></i>
        </button>
      </div>   
      
          
            <div class="form-group">
                &nbsp;
              <label for=""> &nbsp; &nbsp; </label>
              <button class="btn btn-primary  btn-sm btn-block"  ngbTooltip="Limpiar" type="button">
                  <i class="fa fa-eraser fa-lg"></i> 
              </button>
            </div>
  
        </div>
  
        </div>
        
      </form>
    </div>

<h1 class="display-5 text-center mb-4">Reporte de pagos</h1>

<ngx-datatable
    class='material'
    [columnMode]="'force'"        
    [headerHeight]="50"
    [footerHeight]="50"
    [rowHeight]="'auto'"
    [limit]="5"
    [rows]='paymentReportsResults.paymentDetails'
    [selected]="selected"
        [selectionType]="'checkbox'"
        [selectAllRowsOnPage]="false"
        [displayCheck]="displayCheck"
        (activate)="onActivate($event)"
        (select)='onSelect($event)'>

    <ngx-datatable-column
            [width]="50"
            [sortable]="false"
            [canAutoResize]="false"
            [draggable]="false"
            [resizeable]="false"
            [headerCheckboxable]="false"
            [checkboxable]="true"
            (change)="hola()"> </ngx-datatable-column>
      <ngx-datatable-column name="Estado" prop="status"></ngx-datatable-column>
      <ngx-datatable-column name="Tipo" prop="type"></ngx-datatable-column>
      <ngx-datatable-column name="Numero" prop="number"></ngx-datatable-column>
      <ngx-datatable-column name="Serie" prop="serie"></ngx-datatable-column>
      <ngx-datatable-column name="Fecha" prop="date"></ngx-datatable-column>
      <ngx-datatable-column name="Cliente" prop="client"></ngx-datatable-column>
      <ngx-datatable-column name="Razon social" prop="businessName"></ngx-datatable-column>
      <ngx-datatable-column name="Monto" prop="amountCharged"></ngx-datatable-column>




      <ngx-datatable-column name="Acciones" prop="acciones" >
          <ng-template let-row="row" let-id="value" ngx-datatable-cell-template>
            <button class="btn btn-primary fa fa-pencil"></button>
          </ng-template>
      </ngx-datatable-column>

    
  </ngx-datatable> 



  <ng-template #printTpl>
    <div class="modal-header modaleHeader">
      <h4 class="modal-title pull-left">Imprimir</h4>
      <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide(); animateBank=false; ">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <h6 class="text-center text-bold font-weight-bold">¿Esta seguro que desea realizar imprimir el item(s) seleccionado(s)?</h6>
  
      <div class="row justify-content-center align-items-center">
  
  
        <div class="ml-2 mr-2 ">
          <button class="btn btn-secondary" (click)="cancel()"> Cancelar</button>
        </div>
        <div class="ml-2 mr-2 ">
          <button class="btn btn-primary" (click)="printSelected()" >Aceptar</button>
        </div>
      </div>
    </div>
  </ng-template>